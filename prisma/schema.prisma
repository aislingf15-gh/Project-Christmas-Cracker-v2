// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Progress tracking
  progressEntries ProgressEntry[]
  
  // Challenge settings
  challengeSettings ChallengeSettings?

  @@map("users")
}

model ProgressEntry {
  id        String   @id @default(cuid())
  userId    String
  date      DateTime @db.Date
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Daily activities
  stepsCompleted     Boolean @default(false)
  waterGoalMet       Boolean @default(false)
  proteinGoalMet     Boolean @default(false)
  sleepGoalMet       Boolean @default(false)
  readingCompleted   Boolean @default(false)
  supplementsTaken   Boolean @default(false)
  exerciseCompleted  Boolean @default(false)
  adultingTaskDone   Boolean @default(false)

  // Additional tracking
  stepsCount         Int?
  waterIntake        Int? // in ml
  proteinIntake      Int? // in grams
  sleepHours         Float?
  readingMinutes     Int?
  exerciseMinutes    Int?
  adultingTask       String?

  // Relationships
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, date])
  @@map("progress_entries")
}

model ChallengeSettings {
  id        String   @id @default(cuid())
  userId    String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Personal goals
  dailyStepsGoal     Int     @default(8000)
  dailyWaterGoal     Int     @default(2000) // in ml
  dailyProteinGoal   Int     @default(80)   // in grams
  dailySleepGoal     Float   @default(7.5)  // in hours
  dailyReadingGoal   Int     @default(10)   // in minutes
  exerciseDaysPerWeek Int    @default(3)
  exerciseMinutesGoal Int    @default(30)

  // Challenge preferences
  startDate          DateTime @default(dbgenerated("'2024-09-01'::date"))
  endDate            DateTime @default(dbgenerated("'2024-12-25'::date"))
  isActive           Boolean  @default(true)

  // Relationships
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("challenge_settings")
}
